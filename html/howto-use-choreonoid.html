

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Basic usage of Choreonoid &mdash; trc-simulator 1.1.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="trc-simulator 1.1.1 documentation" href="index.html"/>
        <link rel="next" title="Creating a simulation project" href="howto-create-project.html"/>
        <link rel="prev" title="Install" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> trc-simulator
          

          
          </a>

          
            
            
              <div class="version">
                1.1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic usage of Choreonoid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running">Running</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-display">Main display</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-menu">Main menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tool-bar-area">Tool bar area</a></li>
<li class="toctree-l3"><a class="reference internal" href="#view-area">View area</a></li>
<li class="toctree-l3"><a class="reference internal" href="#status-bar">Status bar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#control-of-view-angle">Control of view angle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#switching-of-camera">Switching of camera</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-cameras">Default cameras</a></li>
<li class="toctree-l3"><a class="reference internal" href="#robot-cameras">Robot cameras</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tracking-camera">Tracking camera</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#control-shading">Control shading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wire-frame-display">Wire frame display</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collision-display">Collision display</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-pause-stop-the-simulation">Start/pause/stop the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#save-load-play-the-simulation-result">Save/load/play the simulation result</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#save-the-simulation-result">Save the simulation result</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-and-play-the-simulation-result">Load and play the simulation result</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#view-mode-and-edit-mode">View mode and edit mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-movie-of-simulation-result">Generate movie of simulation result</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="howto-create-project.html">Creating a simulation project</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Choreonoid ROS Plugin Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html">Links</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">trc-simulator</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Basic usage of Choreonoid</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/howto-use-choreonoid.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-usage-of-choreonoid">
<h1>Basic usage of Choreonoid<a class="headerlink" href="#basic-usage-of-choreonoid" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, we will learn basic usage of Choreonoid using sample project.</p>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>Specify path of sample project &#8220;SR1Walk.cnoid&#8221; to load after the startup.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ choreonoid ~/catkin_ws/devel/share/choreonoid-1.5/project/SR1Walk.cnoid
</pre></div>
</div>
<p>Following display should be appeared.</p>
<img alt="_images/choreonoid_SR1Walk.png" src="_images/choreonoid_SR1Walk.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Specify following option to load OpenHRP format model after the startup.</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>$ choreonoid --hrpmodel ~/catkin_ws/devel/share/choreonoid-1.5/model/SR1/SR1.wrl
</pre></div>
</div>
</div>
</div>
<div class="section" id="main-display">
<h2>Main display<a class="headerlink" href="#main-display" title="Permalink to this headline">¶</a></h2>
<p>Components of &#8220;main window&#8221; shown after the Choreonoid startup is shown as follows.</p>
<img alt="_images/choreonoid_SR1Walk_comment.png" src="_images/choreonoid_SR1Walk_comment.png" />
<div class="section" id="main-menu">
<h3>Main menu<a class="headerlink" href="#main-menu" title="Permalink to this headline">¶</a></h3>
<p>In above image, the main menu is shown in title bar of the window.
In default setting of Ubuntu, main menu is shown in the menu bar of whole desktop, but you can change the setting on [system setting]-[display]-[behavior]-[show window menu].</p>
</div>
<div class="section" id="tool-bar-area">
<h3>Tool bar area<a class="headerlink" href="#tool-bar-area" title="Permalink to this headline">¶</a></h3>
<p>Displays various tool bars.
Tool bars can be turned on/off by [main menu]-[view]-[show toolbar].</p>
</div>
<div class="section" id="view-area">
<h3>View area<a class="headerlink" href="#view-area" title="Permalink to this headline">¶</a></h3>
<p>Displays various views.
In above image, &#8220;item&#8221; &#8220;property&#8221; &#8220;link&#8221; &#8220;body/link&#8221; &#8220;joint slider&#8221; &#8220;scene&#8221; &#8220;message&#8221; &#8220;Python console&#8221; view is shown.
You can also stack the view and switch by tab.</p>
<p>The view can be turned on/off by [main menu]-[view]-[show view].
By selecting [create view] you can also create multiple views of same kind as well.
For example, you can create multiple &#8220;scene&#8221; views to display multiple view angles of simulation world or display robot camera.</p>
<p>In above image, messages in red color is displayed.
When there is problem in Choreonoid, warning and error messages are displayed in the message view.
Please check these messages in case of trouble (in above case, the message complains there is no ODE or Bullet plugins, which cause no problem).</p>
</div>
<div class="section" id="status-bar">
<h3>Status bar<a class="headerlink" href="#status-bar" title="Permalink to this headline">¶</a></h3>
<p>Status bar under the main window displays short message about the current process proceeding in Choreonoid.</p>
<p>Region of the status bar is separated to two parts. Left part displays begging and end of process. Right part displays status of the object currently pointed in the current view.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to problem of some graphics driver, GUI elements of Choreonoid sometimes give no response except for 3D display. In such case, please once resize the Choreonoid window and the GUI elements will activated again.</p>
</div>
</div>
</div>
<div class="section" id="control-of-view-angle">
<h2>Control of view angle<a class="headerlink" href="#control-of-view-angle" title="Permalink to this headline">¶</a></h2>
<p>By placing the mouse cursor over the scene view and apply following actions, you can control the 3D graphics of the simulated world.</p>
<ul class="simple">
<li>Left button click and drag: Rotate around the point you have clicked.</li>
<li>Center button click and drag: Parallel translation.</li>
<li>Wheel: Extend or shrink.</li>
<li>Shift+Left drag: Snap horizontally or vertically.</li>
</ul>
<p>Also, you can change the view angle to overview the whole simulation world by clicking the following button on the tool bar.
This button is useful when you lost your current view angle and want to reset.</p>
<img alt="_images/scenebar_look_over_button.png" src="_images/scenebar_look_over_button.png" />
</div>
<div class="section" id="switching-of-camera">
<h2>Switching of camera<a class="headerlink" href="#switching-of-camera" title="Permalink to this headline">¶</a></h2>
<p>The camera used to render view angle can be switched using pull down widget in the scene bar.
Click and focus the scene view you want to switch and select the camera you want to display on the pull down widget.</p>
<img alt="_images/scenebar_camera_select.png" src="_images/scenebar_camera_select.png" />
<div class="section" id="default-cameras">
<h3>Default cameras<a class="headerlink" href="#default-cameras" title="Permalink to this headline">¶</a></h3>
<p>Following cameras are prepared as default.</p>
<ul class="simple">
<li>System - Perspective</li>
<li>System - Orthographic</li>
</ul>
</div>
<div class="section" id="robot-cameras">
<h3>Robot cameras<a class="headerlink" href="#robot-cameras" title="Permalink to this headline">¶</a></h3>
<p>When the robot model loaded in Choreonoid has cameras, it will be listed to pull down widget as follows.</p>
<ul class="simple">
<li>Robot_name - Camera_name</li>
</ul>
</div>
<div class="section" id="tracking-camera">
<h3>Tracking camera<a class="headerlink" href="#tracking-camera" title="Permalink to this headline">¶</a></h3>
<p>You can automatically track the model by using BodyTrackingCameraItem.</p>
<ol class="arabic simple">
<li>Create &#8220;BodyTrackingCameraItem&#8221; as a child item for the target BodyItem and check the item.</li>
<li>Name of the item will be appeared on the camera selection widget. Select the name.</li>
<li>If you set &#8220;Keep Relative Attitude&#8221; property to true, direction of the camera will be also tracked.</li>
</ol>
</div>
</div>
<div class="section" id="control-shading">
<h2>Control shading<a class="headerlink" href="#control-shading" title="Permalink to this headline">¶</a></h2>
<p>Default scene view of Choreonoid is configured with shading enabled.
If you want to disable the shading, click configure button of the scene bar and uncheck the lighting option.</p>
<img alt="_images/scenebar_shading.png" src="_images/scenebar_shading.png" />
</div>
<div class="section" id="wire-frame-display">
<h2>Wire frame display<a class="headerlink" href="#wire-frame-display" title="Permalink to this headline">¶</a></h2>
<p>With wire frame display, you can have transparent view of all the objects.
To switch to wire frame mode, click &#8220;Toggle the wireframe mode&#8221; button of the scene bar.</p>
<img alt="_images/scenebar_wireframe.png" src="_images/scenebar_wireframe.png" />
</div>
<div class="section" id="collision-display">
<h2>Collision display<a class="headerlink" href="#collision-display" title="Permalink to this headline">¶</a></h2>
<p>During the simulation, we sometimes want to check the collision between the objects.
To switch to the collision line visible mode, click &#8220;Toggle the collision line visibility&#8221; button of the scene bar.
Then click on the AISTSimulator item on the item view and set the &#8220;Record collision data&#8221; property to True.</p>
<img alt="_images/scenebar_collision.png" src="_images/scenebar_collision.png" />
</div>
<div class="section" id="start-pause-stop-the-simulation">
<h2>Start/pause/stop the simulation<a class="headerlink" href="#start-pause-stop-the-simulation" title="Permalink to this headline">¶</a></h2>
<p>To start the simulation, click on the following buttons on the &#8220;simulation&#8221; bar.</p>
<img alt="_images/simulationbar.png" src="_images/simulationbar.png" />
<p>Each buttons has following functions respectively (from left side);</p>
<ul class="simple">
<li>Start the simulation from initial position.</li>
<li>Start the simulation from current position.</li>
<li>Pause the simulation.</li>
<li>Stop the simulation.</li>
</ul>
<p>You can once stop the simulation and play the result using the slider on the &#8220;time&#8221; bar. You can enter the exact time on the time bar as well.</p>
<img alt="_images/timebar_slider.png" src="_images/timebar_slider.png" />
<p>To restart the paused simulation, click the &#8220;pause the simulation&#8221; button.</p>
</div>
<div class="section" id="save-load-play-the-simulation-result">
<h2>Save/load/play the simulation result<a class="headerlink" href="#save-load-play-the-simulation-result" title="Permalink to this headline">¶</a></h2>
<p>In Choreonoid, we can save the simulation result (trajectory data) and later play the simulation result using the data.
Here, we will explain how to do using sample project &#8220;PA10Pickup.cnoid&#8221;.</p>
<div class="section" id="save-the-simulation-result">
<h3>Save the simulation result<a class="headerlink" href="#save-the-simulation-result" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Run Choreonoid</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ choreonoid ~/catkin_ws/devel/share/choreonoid-1.5/project/PA10Pickup.cnoid
</pre></div>
</div>
</li>
<li><p class="first">After simulation is started, BodyMotion items named &#8220;AISTSimulator-XXX&#8221; is generated under the BodyItem of moving objects such as robot. These BodyMotion items stores motion trajectory data of simulation result. In following example, BodyMotion items are generated for &#8220;PA10&#8221; and &#8220;box3&#8221; items.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Before simulation starts</td>
<td>After simulation starts</td>
</tr>
<tr class="row-even"><td><img alt="_images/motion-recording-1.png" class="first last" src="_images/motion-recording-1.png" />
</td>
<td><img alt="_images/motion-recording-2.png" class="first last" src="_images/motion-recording-2.png" />
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Select each BodyMotion items (it is OK to select multiple items as well) and save the data by selecting [file]-[save as] menu.</p>
<img alt="_images/motion-recording-3.png" src="_images/motion-recording-3.png" />
<p>Files are saved for each BodyMotion items, so please specify the file name containing name of parent item.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To select multiple items in item view, press Ctrl key and click the item.</p>
<p class="last">If you press Shift key and click, multiple items in range can be selected.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="load-and-play-the-simulation-result">
<h3>Load and play the simulation result<a class="headerlink" href="#load-and-play-the-simulation-result" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Let&#8217;s, once close the Choreonoid and restart.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ choreonoid ~/catkin_ws/devel/share/choreonoid-1.5/project/PA10Pickup.cnoid
</pre></div>
</div>
</li>
<li><p class="first">Select the target BodyItem in the item view, and load corresponding BodyMotion item from file. Select [file]-[open...]-[body motion] menu.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Before loading (BodyItem is selected)</td>
<td>After loading</td>
</tr>
<tr class="row-even"><td><img alt="_images/motion-recording-4.png" class="first last" src="_images/motion-recording-4.png" />
</td>
<td><img alt="_images/motion-recording-5.png" class="first last" src="_images/motion-recording-5.png" />
</td>
</tr>
</tbody>
</table>
<p>Load the corresponding BodyMotion data for the other BodyItems as well.</p>
</li>
<li><p class="first">To play the loaded motion data, we have to select the BodyMotion items (select all the BodyMotion items if there is multiple objects).</p>
<img alt="_images/motion-recording-6.png" src="_images/motion-recording-6.png" />
</li>
<li><p class="first">Click &#8220;start animation&#8221; button on the time bar to play the simulation result.</p>
<img alt="_images/motion-recording-7.png" src="_images/motion-recording-7.png" />
</li>
</ol>
</div>
</div>
<div class="section" id="view-mode-and-edit-mode">
<span id="howto-use-view-edit-mode-label"></span><h2>View mode and edit mode<a class="headerlink" href="#view-mode-and-edit-mode" title="Permalink to this headline">¶</a></h2>
<p>In the scene view, we usually control the 3D graphics of the simulation world using view mode.
But by switching to edit mode, we can control the objects in the simulation world.</p>
<ul class="simple">
<li>Mode can be switched by pressing ESC key or by double click the background of the scene view.<ul>
<li>Shape of mouse cursor is changed to hand shape when in edit mode.</li>
</ul>
</li>
<li>We recommend to use scene view in view mode in normal operation to avoid accidental editing of object.</li>
<li>In edit mode, you can pull to move the objects in following situations.<ul>
<li>Set initial pose of the object (before the simulation).</li>
<li>Give external force to the robot (during the simulation).</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="generate-movie-of-simulation-result">
<h2>Generate movie of simulation result<a class="headerlink" href="#generate-movie-of-simulation-result" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Once apply the simulation and make motion playable using the play button on the time bar.</p>
<img alt="_images/motion-movie-1.png" src="_images/motion-movie-1.png" />
</li>
<li><p class="first">Select [Tools]-[Movie Recorder] menu. &#8220;Movie recorder&#8221; dialog will be shown.</p>
<img alt="_images/motion-movie-2.png" src="_images/motion-movie-2.png" />
</li>
<li><p class="first">Set following parameters.</p>
<ol class="loweralpha">
<li><p class="first">Select target view to record.</p>
</li>
<li><p class="first">Select recording mode to offline.</p>
</li>
<li><p class="first">Enter directory you want to output the serial capture image file.</p>
</li>
<li><p class="first">Enter base file name to save serial capture image file.</p>
</li>
<li><p class="first">Set &#8220;Start time&#8221; and &#8220;Finish time&#8221;.</p>
</li>
<li><p class="first">Set frame rate.</p>
</li>
<li><p class="first">Image size can be specified by checking &#8220;image size&#8221;. This function will crop the captured image to specified size. Thus, the original size of view has to be larger than the specified size. Please adjust the view size to be larger than the specified size before beginning the recording.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The section 5 in generate of the movie in format of yuv420p. This format is need specify even pixel size. If specify odd pixel size, fail to generate of the movie file.</p>
</div>
</li>
</ol>
<img alt="_images/motion-movie-6.png" src="_images/motion-movie-6.png" />
</li>
<li><p class="first">Press &#8220;Record&#8221; button to output the serial capture image files.
Serial capture image files are generated in specified directory as follows.</p>
<img alt="_images/motion-movie-7.png" src="_images/motion-movie-7.png" />
</li>
<li><p class="first">Enter following command to generate movie from the serial capture image files.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ avconv -i scene%08d.png -r <span class="m">30</span> -an -vcodec libx264 -pix_fmt yuv420p video.mp4
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If avconv command not found, run the follow commnad.</p>
<blockquote class="last">
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt-get install libav-tools
</pre></div>
</div>
</div></blockquote>
</div>
</li>
</ol>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="howto-create-project.html" class="btn btn-neutral float-right" title="Creating a simulation project" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Install" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Advanced Industrial Science and Technology (AIST).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>